function monkeyPatchConsole(ws){let console=window.console,log=console.log,info=console.info,warn=console.warn,error=console.error,debug=console.debug;function stripFormatting(args){if(args.length===0)return args;if(typeof args[0]==="string"&&args[0].includes("%c")){let formatString=args[0],matches=formatString.match(/%c/g),numFormatters=matches?matches.length:0;return[formatString.replace(/%c/g,""),...args.slice(1+numFormatters)]}return args}console.log=function(...args){if(ws.readyState===WebSocket.OPEN)ws.send(JSON.stringify({Log:{level:"log",messages:stripFormatting(args)}}));log.apply(console,args)},console.info=function(...args){if(ws.readyState===WebSocket.OPEN)ws.send(JSON.stringify({Log:{level:"info",messages:stripFormatting(args)}}));info.apply(console,args)},console.warn=function(...args){if(ws.readyState===WebSocket.OPEN)ws.send(JSON.stringify({Log:{level:"warn",messages:stripFormatting(args)}}));warn.apply(console,args)},console.error=function(...args){if(ws.readyState===WebSocket.OPEN)ws.send(JSON.stringify({Log:{level:"error",messages:stripFormatting(args)}}));error.apply(console,args)},console.debug=function(...args){if(ws.readyState===WebSocket.OPEN)ws.send(JSON.stringify({Log:{level:"debug",messages:stripFormatting(args)}}));debug.apply(console,args)}}export{monkeyPatchConsole};

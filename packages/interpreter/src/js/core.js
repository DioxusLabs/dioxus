function J(g,E,D,M){if(M==="style"){g.style.setProperty(E,D);return}if(M){g.setAttributeNS(M,E,D);return}switch(E){case"value":if(g.value!==D)g.value=D;break;case"initial_value":g.defaultValue=D;break;case"checked":g.checked=C(D);break;case"initial_checked":g.defaultChecked=C(D);break;case"selected":g.selected=C(D);break;case"initial_selected":g.defaultSelected=C(D);break;case"dangerous_inner_html":g.innerHTML=D;break;default:if(!C(D)&&O(E))g.removeAttribute(E);else g.setAttribute(E,D)}}var C=function(g){return g==="true"||g===!0},O=function(g){switch(g){case"allowfullscreen":case"allowpaymentrequest":case"async":case"autofocus":case"autoplay":case"checked":case"controls":case"default":case"defer":case"disabled":case"formnovalidate":case"hidden":case"ismap":case"itemscope":case"loop":case"multiple":case"muted":case"nomodule":case"novalidate":case"open":case"playsinline":case"readonly":case"required":case"reversed":case"selected":case"truespeed":case"webkitdirectory":return!0;default:return!1}};class P{global;local;root;handler;nodes;stack;templates;m;constructor(){}initialize(g,E=null){if(this.global={},this.local={},this.root=g,this.nodes=[g],this.stack=[g],this.templates={},E)this.handler=E}createListener(g,E,D){if(D)if(this.global[g]===void 0)this.global[g]={active:1,callback:this.handler},this.root.addEventListener(g,this.handler);else this.global[g].active++;else{const M=E.getAttribute("data-dioxus-id");if(!this.local[M])this.local[M]={};E.addEventListener(g,this.handler)}}removeListener(g,E,D){if(D)this.removeBubblingListener(E);else this.removeNonBubblingListener(g,E)}removeBubblingListener(g){if(this.global[g].active--,this.global[g].active===0)this.root.removeEventListener(g,this.global[g].callback),delete this.global[g]}removeNonBubblingListener(g,E){const D=g.getAttribute("data-dioxus-id");if(delete this.local[D][E],Object.keys(this.local[D]).length===0)delete this.local[D];g.removeEventListener(E,this.handler)}removeAllNonBubblingListeners(g){const E=g.getAttribute("data-dioxus-id");delete this.local[E]}getNode(g){return this.nodes[g]}appendChildren(g,E){const D=this.nodes[g],M=this.stack.splice(this.stack.length-E);for(let q=0;q<E;q++)D.appendChild(M[q])}loadChild(g,E){let D=this.stack[this.stack.length-1],M=g+E;for(;g<M;g++){let q=this.m.getUint8(g);for(D=D.firstChild;q>0;q--)D=D.nextSibling}return D}saveTemplate(g,E){this.templates[E]=g}hydrate(g){const E=document.querySelectorAll("[data-node-hydration]");for(let q=0;q<E.length;q++){const w=E[q],B=w.getAttribute("data-node-hydration").split(","),G=g[parseInt(B[0])];if(this.nodes[G]=w,B.length>1){w.listening=B.length-1,w.setAttribute("data-dioxus-id",G.toString());for(let F=1;F<B.length;F++){const H=B[F].split(":"),K=H[0],L=H[1]==="1";this.createListener(K,w,L)}}}const D=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT);let M=D.nextNode();while(M){const w=M.textContent.split("node-id");if(w.length>1){let z=M.nextSibling;if(z.nodeType===Node.COMMENT_NODE)z=z.parentElement.insertBefore(document.createTextNode(""),z);this.nodes[g[parseInt(w[1])]]=z}M=D.nextNode()}}setAttributeInner(g,E,D,M){J(g,E,D,M)}}export{P as BaseInterpreter};

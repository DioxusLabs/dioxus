class O{pending;waiting;constructor(){this.pending=[],this.waiting=[]}send(b){if(this.waiting.length>0){this.waiting.shift()(b);return}this.pending.push(b)}async recv(){return new Promise((b,f)=>{if(this.pending.length>0){b(this.pending.shift());return}this.waiting.push(b)})}}class P{inner;constructor(b){this.inner=new WeakRef(b)}rustSend(b){let f=this.inner.deref();if(f)f.rustSend(b)}async rustRecv(){let b=this.inner.deref();if(b)return await b.rustRecv()}}class g{weak(){return new P(this)}}class j extends g{js_to_rust;rust_to_js;owner;constructor(b){super();this.owner=b,this.js_to_rust=new O,this.rust_to_js=new O}weak(){return new P(this)}async recv(){return await this.rust_to_js.recv()}send(b){this.js_to_rust.send(b)}rustSend(b){this.rust_to_js.send(b)}async rustRecv(){return await this.js_to_rust.recv()}}export{j as WebDioxusChannel,P as WeakDioxusChannel,g as DioxusChannel,O as Channel};

name = "cf-worker"
main = "build/worker/shim.mjs"
compatibility_date = "2025-06-08"

[build]
command = "cargo build --release --target wasm32-unknown-unknown --features web && cargo install -q worker-build && worker-build --features server-wasm"
# command = "dx build --release --target wasm32-unknown-unknown --platform web --features web && cargo install -q worker-build && worker-build --features server-wasm"
# without this, wrangler infinitely rebuilds the worker though nothing changed
watch_dir = ["dummy"]
